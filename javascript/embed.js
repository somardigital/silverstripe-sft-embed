!function(){let e=process.env.VUE_APP_EMBED_IFRAME_URL||"https://sft.org.nz/",t="service-finder-tool",i,d;window.openServiceFinderTool=d=>{d&&(i=d.target,d.preventDefault());let o=document.getElementById(t);if(o instanceof Element){o.focus();return}let l=document.createElement("div");l.id=t,l.tabIndex="-1",l.style.position="fixed",l.style.top=0,l.style.left=0,l.style.right=0,l.style.bottom=0,l.style.zIndex=9999;let r=document.createElement("div");r.style.background="rgba(0, 0, 0, 0.6)",r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.right=0,r.style.bottom=0;let n=document.createElement("iframe");n.setAttribute("src",e),n.setAttribute("title","Home - Service Finder"),n.setAttribute("id","sft-embedded"),n.style.border="none";let s=window.getEmbeddedWidthAndLeftByBrowserWidth(window.innerWidth);n.style.width=s.widthExpression,n.style.height="90%",n.style.position="absolute",n.style.top="5%",n.style.left=s.leftExpression,r.addEventListener("click",window.closeServiceFinderTool),l.addEventListener("keydown",e=>{"Escape"===e.key&&window.closeServiceFinderTool()}),l.appendChild(r),r.appendChild(n),document.querySelector("body").appendChild(l),document.querySelector("body").style.overflow="hidden",l.focus()},window.getEmbeddedWidthAndLeftByBrowserWidth=e=>{let t,i;return e>1800?(t="1700px",i=`${50*(e-1700)/e}%`):e>1024?(t="calc(100% - 64px)",i="32px"):e>700?(t="700px",i=`${50*(e-700)/e}%`):(t="100%",i=0),{widthExpression:t,leftExpression:i}},window.closeServiceFinderTool=()=>{document.querySelector("body").style.overflow="";let e=document.getElementById(t);e instanceof Element&&(e.remove(),i instanceof Element&&i.focus())},window.initServiceFinderTool=(e=".js-service-finder-tool-trigger")=>{let t=document.querySelectorAll(e);t.length&&t.forEach(e=>{e.addEventListener("click",window.openServiceFinderTool)})},document.addEventListener("DOMContentLoaded",()=>{window.initServiceFinderTool()}),window.adjustIFramePopupWidthAndPosition=()=>{clearTimeout(d),d=setTimeout(()=>{let e=document.getElementById("sft-embedded");if(e){let t=window.getEmbeddedWidthAndLeftByBrowserWidth(window.innerWidth);e.style.width=t.widthExpression,e.style.left=t.leftExpression}},125)},window.addEventListener("resize",window.adjustIFramePopupWidthAndPosition,!1),window.addEventListener("message",e=>{"closeServiceFinderTool"===e.data&&window.closeServiceFinderTool(),"exitSiteSafely"===e.data&&window.location.replace("https://www.stuff.co.nz")})}();
